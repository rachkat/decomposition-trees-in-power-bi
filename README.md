# Decomposition Trees in Power BI (Lab 6.1)

> **Course Module:** Four  
> **Tooling:** Power BI Desktop (Decomposition Tree visual)  
> **Deliverable:** Markdown README with embedded screenshots (no PDFs)

---

## Overview
In Module Four, you shift from **bottom-up** models to **top-down** models. The goal of this lab is to introduce the methodology of **decision / decomposition analysis** and teach you how to read decision trees and answer questions about them. Conditional probabilities and split recommendations can be generated by the visual—just point and click.

> **Tip:** You can view the entire tree by clicking and **dragging** the visual left ↔ right as needed. If you alter the dashboard layout to the point that it’s no longer useful while practicing, simply **close without saving** and reopen to restore defaults.

---

## What you’ll learn
- Build and interpret a **Decomposition Tree** in Power BI  
- Configure **Analyze** (metric) vs **Explain By** (dimensions) fields  
- Use **AI Split** to suggest statistically strongest next splits  
- Apply interactive **filters/slicers** and observe how node metrics update  
- Capture reproducible **screenshots** for lab documentation  

---

## How to reproduce (quick steps)
1. Open the **uCertify Lab 6.1 – Decomposition Trees in Power BI** environment.  
2. In Power BI Desktop:  
   - Add the **Decomposition Tree** visual.  
   - Set your *Analyze* metric (e.g., **Average Age** or **Average of Capital Gains**).  
   - Add categorical fields to *Explain By* (e.g., **Race**, **Sex**, **Education**, **Occupation**, **Native Country**).  
3. Expand nodes by clicking a **+** sign; use **AI Split** to let Power BI choose strongest split.  
4. Adjust report-level selectors/slicers (e.g., *Female*, *Occupation: prof-specialty*, *Education: Doctorate*, *Weighted % White*).  
5. Capture screenshots as you go (see *Screenshots* below for file names and placement).  

---

## Screenshots
> **Important:** Place your images in a folder **named `images/`** in the **same directory** as this README. Use the exact file names below so the links work immediately on GitHub.

### 1) New Decision Tree (overview)
**Prompt:** *What does your new decision tree look like? Provide a screenshot.*

![Figure 1 — Decomposition tree overview](images/01-decomp-tree-overview.png)

> *Caption:* Initial tree showing top-down splits for the selected **Analyze** metric.

---

### 2) Average Age with current selections
**Question:** *What is the average age with these new selections?*

**Answer:** **38.61 years**

> *Note:* Your value will reflect your active filters and node selections. (Mine shows 38.61.)

---

### 3) Filtered Tree (specific inputs)
**Select exactly:**
- **Weighted percentage of white**  
- **Sex:** Female  
- **Occupation:** prof-specialty  
- **Education:** Doctorate  

Add/confirm these as slicers or by drilling the tree to these categories, then capture the revised tree:

![Figure 2 — Tree after targeted filters](images/03-decomp-tree-filtered.png)

> *Caption:* Decomposition tree restricted to *Female → prof-specialty → Doctorate* within the “weighted % white” context.

---

### 4) Why do the numbers change?
As you change inputs (filters or expanded nodes), you change the **subset of data** being aggregated by the *Analyze* metric. The Decomposition Tree recomputes the **measure** (e.g., average age) for the **currently selected slice** of the data, so values will differ across paths and filters by design. In short: *new slice ⇒ new aggregation ⇒ new number*.

---

## 5) Three different trees — what each calculates (A, B, C)
Create three distinct trees by swapping the *Analyze* metric and/or the *Explain By* fields. Below are examples and the associated screenshots.

> **File names:**  
> A → `images/05a-decomp-tree-variant-a.png`  
> B → `images/05b-decomp-tree-variant-b.png`  
> C → `images/05c-decomp-tree-variant-c.png`  

### A) Minimum Age focus (white females)
- **Analyze:** *Minimum Age* (min of Age)  
- **Explain By:** Race → Sex → Native Country → Education → Occupation  
- **Focus path:** *White → Female*  
- **What it’s calculating:** The **minimum observed age** within the selected path. In my run, the **global minimum** was **17**, and I explored how that path tightens under white females.  

![Figure 3 — Variant A: Minimum age focus](images/05a-decomp-tree-variant-a.png)

> *Interpretation tip:* When using **Minimum** as the metric, extreme values can be driven by small groups. Consider adding counts to tooltips to judge robustness.

---

### B) Average of Capital Gains (American Indian–Eskimo, bachelor’s, female)
- **Analyze:** *Average of Capital Gains*  
- **Explain By:** Race → Education → Sex → Occupation  
- **Focus path:** *American Indian–Eskimo → Bachelor’s → Female*  
- **What it’s calculating:** The **mean capital gains** for the specified subgroup. The tree reveals which attribute splits most strongly differentiate capital-gains levels.  

![Figure 4 — Variant B: Avg. Capital Gains by subgroup](images/05b-decomp-tree-variant-b.png)

> *Interpretation tip:* Watch for **AI Split** suggestions to prioritize splits that maximize between-group differences in the metric.

---

### C) Average Age by Sex, Education, Occupation, Ethnicity
- **Analyze:** *Average Age*  
- **Explain By:** Sex → Education → Occupation → Race  
- **Example findings from my run:**  
  - **Overall average age:** **38.61**  
  - **Males (overall):** **44.33**  
  - **Males with some college:** **44.33**  
  - **Males in tech support:** **37.26**  
  - **Asian Pacific Islander males:** **38.17**  
- **What it’s calculating:** The **mean age** within each branch. Each split refines the cohort and recomputes the average for that slice.  

![Figure 5 — Variant C: Avg. Age across splits](images/05c-decomp-tree-variant-c.png)

> *Note:* Your exact values may differ depending on your dataset filters/state. Document the active filters when you capture screenshots.

---

## Key Skills Demonstrated
- Building and reading **Decomposition Trees**  
- Choosing effective **Analyze** metrics (average, minimum, sum)  
- Curating **Explain By** hierarchies to test hypotheses  
- Using **AI Split** vs manual splits  
- Applying/clearing **slicers & filters** and validating results  
- **UX writing** for clear figure titles, captions, and tooltips  

---

## Future Improvements
- Add **Bookmarks** to toggle between tree variants (A/B/C)  
- Create a **Drillthrough** page for subgroup details (cards & KPIs)  
- Add **count**/population context in tooltips to avoid over-reading small groups  
- Record a short **GIF demo** of the tree interaction (expand, AI Split, slicer changes)  

---

## Repo & file structure
Recommended layout in this folder:
